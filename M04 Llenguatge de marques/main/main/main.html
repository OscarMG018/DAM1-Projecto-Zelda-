<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Título de tu Página</title>
    <link rel="stylesheet" href="main.css">
    <script src="main.js" async></script>
    
    
</head>

<body>


<!-- Fondo -->

    <a class="recurso-utilizado"><img id="tile" src="img/tile.png"></a>
    <a class="recurso-utilizado"><img id="ntile" src="img/ntile.png"></a>
       


    <canvas id="canvasElement" class="fullsize">
        <p>Su navegador no soporta canvas</p>
    </canvas>

    <script id="default_vsh" type="x-shader/x-vertex">
        uniform mat4 u_mv;
        uniform mat4 u_mvp;

        attribute vec3 a_vertex;
        attribute vec2 a_textCoord;

        varying vec2 v_texturePosition;
        varying vec4 v_position;

        void main() {
            v_texturePosition = a_textCoord;
            v_position = u_mv * vec4(a_vertex, 1.0);
            gl_Position = u_mvp * vec4(a_vertex, 1.0);
        }
    </script>
    <script id="default_fsh" type="x-shader/x-fragment">
        precision highp float;

        uniform sampler2D u_texture;
        uniform sampler2D u_map;
        uniform vec3 u_pos;

        varying vec2 v_texturePosition;
        varying vec4 v_position;

        void main() {
            vec4 ambientColor = vec4(0.05, 0.05, 0.05, 1.0);
            vec4 diffuseColor = vec4(1.0, 1.0, 1.0, 1.0);
            vec4 specularColor = vec4(1.0, 1.0, 1.0, 1.0);
            float lightPower = 60000.0;

            vec4 textureColor = texture2D(u_texture, v_texturePosition);
            vec4 mapColor = texture2D(u_map, v_texturePosition);

            vec3 normal = normalize(mapColor.xyz * 2.0 - 1.0);
            vec3 lightDirection = normalize(u_pos - v_position.xyz);
            float ang = clamp(dot(normal, lightDirection), 0.0, 1.0);

            float dist = distance(v_position.xyz, u_pos);

            vec4 ambient = textureColor * ambientColor;
            vec4 diffuse = textureColor * diffuseColor * ang * lightPower / dist / dist;

            gl_FragColor = ambient + diffuse;
        }
    </script>
</body>
</html>
